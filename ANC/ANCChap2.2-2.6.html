<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../reviewer.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
    <title>Subject Chapter Title</title>
</head>

<body>
    <div class="page-container">
        <!-- The navbar will be loaded here -->
        <div id="navbar-container"></div>
        
        <div class="maincontent">
            <!-- Your main content for the page goes here -->
            <h1>Subject Chapter Title</h1>
            <!-- Content sections -->
        </div>
        
        <div class="notecontent">
            <!-- Notes or summarization of key points -->
        </div>
    </div>

    <!-- Updated script to load navbar and initialize it properly -->
    <script>
        // Function to load the navbar
        function loadNavbar() {
            fetch('../navbar.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('navbar-container').innerHTML = data;
                    
                    // Initialize sidebar functions after navbar is loaded
                    initializeSidebar();
                    
                    // Highlight the current page in the navbar
                    highlightCurrentPage();
                })
                .catch(error => console.error('Error loading navbar:', error));
        }
        
        // Function to initialize sidebar functionality
        function initializeSidebar() {
            // Sidebar toggle for mobile
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebar = document.getElementById('sidebar');
            
            if (sidebarToggle && sidebar) {
                sidebarToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('active');
                    
                    // Change the toggle icon appearance
                    const toggleIcon = sidebarToggle.querySelector('.toggle-icon');
                    if (toggleIcon) {
                        toggleIcon.classList.toggle('active');
                    }
                });
            }
            
            // Subject accordions
            const subjectNames = document.querySelectorAll('.subject-name');
            
            subjectNames.forEach(subject => {
                subject.addEventListener('click', function() {
                    const parentItem = this.parentElement;
                    const isActive = parentItem.classList.contains('active');
                    
                    // Close all other subjects
                    document.querySelectorAll('.subject-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Toggle this subject
                    if (!isActive) {
                        parentItem.classList.add('active');
                    }
                });
            });
        }
        
        // Function to highlight the current page in the navbar
        function highlightCurrentPage() {
            // Get current page path
            const currentPath = window.location.pathname;
            const filename = currentPath.substring(currentPath.lastIndexOf('/') + 1);
            
            // Find and highlight the current page link
            const links = document.querySelectorAll('.chapter-list a');
            links.forEach(link => {
                if (link.getAttribute('href').endsWith(filename)) {
                    link.classList.add('active');
                    
                    // Expand the parent subject
                    let parentSubject = link.closest('.subject-item');
                    if (parentSubject) {
                        parentSubject.classList.add('active');
                    }
                }
            });
        }
        
        // Load the navbar when the page loads
        document.addEventListener('DOMContentLoaded', loadNavbar);
    </script>
    
    <!-- Load your other scripts after the navbar is loaded -->
    <script src="../reviewer.js"></script>
</body>
</html>